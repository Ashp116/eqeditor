<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebWork Equation Editor | Ashp116</title>

    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <meta name="msapplication-TileColor" content="#da532c">

    <meta name="theme-color" content="#ffffff">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

    <link rel="stylesheet" href="/mathquill-0.10.1/mathquill.css"/>
    <script src="/mathquill-0.10.1/mathquill.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>
        const MQ = MathQuill.getInterface(2);
    </script>

    <link rel="stylesheet" href="/style.css"/>

</head>
<body>
<h1 style="text-align: center" class="varela-round">WebWork Equation Editor</h1>
<p>
    <span id="answer"></span>
</p>
<button id="copy_eq" class="copy_eq varela-round">
    Copy
    <span class="tooltiptext">Copy to clipboard</span>
    <i class="fa fa-clipboard"></i>
</button>
<!---
<button id="copy_as_latex" class="copy_eq">
    LaTex
    <span class="tooltiptext">Copy to clipboard as LaTex</span>
    <i class="fa fa-clipboard"></i>
</button>
-->
<br>
<br>
<br>
<div class="main-eq">
    <div class="eq-types">
        <ul id="eq-list" class="varela-round" >
            <li class="eq-type" val="Basic">Basic</li>
            <li class="eq-type" val="Exponents">Exponents</li>
            <li class="eq-type" val="Trigonometry">Trigonometry</li>
            <li class="eq-type" val="InverseTrigonometry">Inv Trigonometry</li>
            <li class="eq-type" val="Logarithms">Logarithms</li>
            <li class="eq-type" val="Intervals">Intervals</li>
            <li class="eq-type" val="Others">Others</li>
        </ul>
    </div>
    <div class="eq-container varela-round" id="utilities"></div>
</div>

<footer class="varela-round" style="margin-top: 9%">
    <i class="fa fa-github" style="font-size:36px"></i>
    <a style="font-size:24px" target="_blank" href="https://github.com/Ashp116/webwork_equation_editor">Github</a>
</footer>
</body>
<script src="/main.js"></script>
<script>
    let math_eq = ''

    var answerSpan = document.getElementById('answer');
    var answerMathField = MQ.MathField(answerSpan, {
        sumStartsWithNEquals: true,
        supSubsRequireOperand: true,
        charsThatBreakOutOfSupSub: '+-=<>',
        autoSubscriptNumerals: true,
        autoCommands: 'pi theta sum',
        handlers: {
            edit: function() {
                math_eq = answerMathField.latex(); // Get entered math in LaTeX format
            }
        }
    });

    // Connect the EqTabs to the eq-list to allow the user to use different operations
    for (const eq_type of document.getElementById("eq-list").children) {

        eq_type.onclick = () => {
            eq_type_btns(eq_type)
        }
    }

    eq_type_btns(document.getElementById("eq-list").children.item(0))

    // Copy as text
    document.getElementById("copy_eq").onclick = () => {
        if (math_eq === "") return
        navigator.clipboard.writeText(latexToString(math_eq))
    }
</script>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WebWork Equation Editor | Ashp116</title>

  <link rel="apple-touch-icon" sizes="180x180" href="/webwork_equation_editor/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/webwork_equation_editor/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/webwork_equation_editor/favicon/favicon-16x16.png">
  <link rel="manifest" href="/webwork_equation_editor/favicon/site.webmanifest">
  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script defer src="//unpkg.com/mathlive"></script>

  <link rel="stylesheet" href="/webwork_equation_editor/style.css"/>
</head>
<body>
<h1 style="text-align: center" class="varela-round">WebWork Equation Editor</h1>

<math-field id="formula">f(x) = \sin(x+\pi)</math-field>
<a id="copy_eq" class="btn varela-round">
  Copy
  <i class="fa fa-clipboard"></i>
</a>

</body>
<script src="/webwork_equation_editor/main.js"></script>
<script>
  window.addEventListener("DOMContentLoaded", () =>
          import("//unpkg.com/mathlive?module").then((mathlive) => {
            mathlive.renderMathInDocument()
            const mf = document.getElementById("formula");

            mf. menuItems = [
              {
                label: 'Copy',
                onMenuSelect: () => {
                  if (mf.value === "") return
                  navigator.clipboard.writeText(latexToString(mf.value))
                }
              },
            ];

            // Copy as text
            document.getElementById("copy_eq").onclick = () => {
              if (mf.value === "") return
              navigator.clipboard.writeText(latexToString(mf.value))
            }

            document.querySelector('math-field').addEventListener('focus', () => {
              mathVirtualKeyboard.layouts = [
                {
                  label: "Basic",
                  tooltip: "Only the essential",
                  rows: [
                    [
                      "+", "-", "\\times", "\\frac{#@}{#?}", "=", ".",
                      "(", ")", "\\sqrt{#0}", "#@^{#?}",
                      "\\log(#0)", "\\log_#@{#?}", "ln(#@)", "e^x"
                    ],
                    ["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"],
                  ]
                },
                "alphabetic",
                {
                  label: "Interval",
                  tooltip: "Interval notations",
                  rows: [
                    [
                      "[#@,#?]", "(#@,#?]", "[#@,#?)",
                      "(#@,#?)", "{#@}\\cup{#?}"
                    ],
                  ]
                },
                {
                  label: "Trig",
                  tooltip: "Trigonometric functions",
                  rows: [
                    [
                      "\\sin(#@)",
                      "\\cos(#@)",
                      "\\tan(#@)",
                      "\\sin^{-1}(#@)",
                      "\\cos^{-1}(#@)",
                      "\\tan^{-1}(#@)",
                    ],
                    [
                      "\\csc(#@)",
                      "\\sec(#@)",
                      "\\cot(#@)",
                      "\\csc^{-1}(#@)",
                      "\\sec^{-1}(#@)",
                      "\\cot^{-1}(#@)",
                    ],
                  ]
                },
                {
                  label: "Symbols",
                  tooltip: "Greek symbols",
                  rows: [
                    [
                      "\\pi",
                      "\\theta",
                      "\\phi",
                      "\\infty",
                    ]
                  ]
                },

              ];
            });
          })

  );

</script>
</html>

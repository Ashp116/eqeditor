<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/mathquill-0.10.1/mathquill.css"/>
    <link rel="stylesheet" href="/style.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="/mathquill-0.10.1/mathquill.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script>
        const MQ = MathQuill.getInterface(2);
    </script>
    <style>
        * {
            box-sizing: border-box;
            font-family: "Varela Round", sans-serif;
        }

        .editor {

        }

        .main-eq {
            display: flex;
            flex-wrap: wrap;
        }

        .eq-types {
            width: 28%;
            height: 100%;
        }
        ul {
            margin-block-start: 0em;
            margin-block-end: 0em;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
            padding-inline-start: 0px;
            list-style-type: none;
            border-width:1px;
            padding-left: 0pt;
        }

        .eq-type {
            padding: 10px;
            font-size: 100%;
            height: 120%;
            text-align: center;
            margin: 1.3px;
            flex-shrink: 1;
            border-radius: 10px;
            cursor: pointer;
            align-items: center;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .eq-type:hover {
            background-color: #d3d3d3;
        }

        .eq-active {
            background-color: #d3d3d3;
        }

        .eq-container {
            display: flex;
            flex-wrap: wrap;
            padding: 2px;
            width: 72%;
        }

        .eq-btn {
            background-color: #D9D9D9;
            padding: 44.5px;
            font-size: 30px;
            flex: 30.33%;
            text-align: center;
            margin: 5px;
            border-radius: 10px;
            cursor: pointer;
            align-items: center;
        }

        .eq-btn:hover {
            background-color: #b5b5b5;
        }

        .eq-btn:active {
            background-color: #959595;
        }
    </style>
</head>
<body>
<p class="">
    <span id="answer"></span>

</p>
<div class="main-eq">
    <div class="eq-types">
        <ul id="eq-list">
            <li class="eq-type" val="Basic">Basic</li>
            <li class="eq-type" val="Exponents">Exponents</li>
            <li class="eq-type" val="Trigonometry">Trigonometry</li>
            <li class="eq-type" val="InverseTrigonometry">Inv Trigonometry</li>
            <li class="eq-type" val="Logarithms">Logarithms</li>
            <li class="eq-type" val="Intervals">Intervals</li>
            <li class="eq-type" val="Others">Others</li>
        </ul>
    </div>
    <div class="eq-container" id="utilities">
        <div class="eq-btn">a+b</div>
        <div class="eq-btn">a-b</div>
        <div class="eq-btn invis">a*b</div>
        <div class="eq-btn"></div>
        <div class="eq-btn"></div>
        <div class="eq-btn"></div>
    </div>
</div>
</body>
<script>
    const Tabs = {
        Basic: [
            "a+b",
            "a-b",
            "a * b",
            "a \\div b",
            "\\frac{a}{b}",
            "|a|"
        ],
        Exponents: [
            "a^b",
            "\\sqrt{a}",
            "\\sqrt[n]{x}",
            "e^a"
        ],
        Trigonometry: [
            "sin(a)",
            "cos(a)",
            "tan(a)",
            "csc(a)",
            "sec(a)",
            "cot(a)"
        ],
        InverseTrigonometry: [
            "\\sin^{-1}(a)",
            "\\cos^{-1}(a)",
            "\\tan^{-1}(a)",
            "\\cot^{-1}(a)",
            "\\sec^{-1}(a)",
            "\\csc^{-1}(a)",
        ],
        Logarithms: [
            "\\log(a)",
            "\\log_a{b}",
            "ln(a)",
            "e^x"
        ],
        Intervals: [
            "[a,b]",
            "(a,b]",
            "[a,b)",
            "(a,b)",
            "{A}\\cup{B}"
        ],
        Others: [
            "\\infty",
            "\\pi",
            "e",
            "(a)",
            "[a]",
            "{a}"
        ],
    }

    let math_eq = ''
    var answerSpan = document.getElementById('answer');
    var answerMathField = MQ.MathField(answerSpan, {
        sumStartsWithNEquals: true,
        supSubsRequireOperand: true,
        charsThatBreakOutOfSupSub: '+-=<>',
        autoSubscriptNumerals: true,
        autoCommands: 'pi theta sum',
        handlers: {
            edit: function() {
                math_eq = answerMathField.latex(); // Get entered math in LaTeX format
            }
        }
    });

    const updateUtilities = () => {
        for (const element of document.getElementById("utilities").children) {
            let elementVal = element.innerHTML

            element.onclick = function () {
                answerMathField.write(elementVal)
            }

            MQ.StaticMath(element)
        }
    }

    const eq_type_btns = (eq_type) => {
        for (const eq_element of document.getElementById("eq-list").children) {
            eq_element.classList.remove("eq-active")
        }

        eq_type.classList.add("eq-active")

        let utils = document.getElementById("utilities")
        utils.innerHTML = ""

        for (let i = 0; i < Tabs[eq_type.getAttribute("val")].length; i++) {
            utils.innerHTML += `<div class="eq-btn">${Tabs[eq_type.getAttribute("val")][i]}</div>`
        }

        updateUtilities()
    }

    for (const eq_type of document.getElementById("eq-list").children) {

        eq_type.onclick = () => {
            eq_type_btns(eq_type)
        }
    }

    eq_type_btns(document.getElementById("eq-list").children.item(0))
</script>
</html>